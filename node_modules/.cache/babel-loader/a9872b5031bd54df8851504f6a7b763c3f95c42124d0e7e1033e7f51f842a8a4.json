{"ast":null,"code":"/**\n * API client for contractor builder backend\n */\n\n// Use same origin - API is served from the same server as the frontend\n// This works because server.js serves both the React app AND the API\nconst API_BASE_URL = '';\n\n/**\n * Save a website to the database\n */\nexport const saveWebsite = async websiteData => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(websiteData)\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error saving website:', error);\n    throw error;\n  }\n};\n\n/**\n * Get all websites from the database\n */\nexport const getAllWebsites = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.websites || [];\n  } catch (error) {\n    console.error('Error fetching websites:', error);\n    return [];\n  }\n};\n\n/**\n * Get a single website by ID\n */\nexport const getWebsiteById = async id => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites/${id}`);\n    if (!response.ok) {\n      if (response.status === 404) {\n        return null;\n      }\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.website;\n  } catch (error) {\n    console.error('Error fetching website:', error);\n    return null;\n  }\n};\n\n/**\n * Delete a website from the database\n */\nexport const deleteWebsite = async id => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites/${id}`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.success;\n  } catch (error) {\n    console.error('Error deleting website:', error);\n    throw error;\n  }\n};\nexport const deleteAllWebsites = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.success;\n  } catch (error) {\n    console.error('Error deleting all websites:', error);\n    throw error;\n  }\n};\n\n// Delete ALL websites\napp.delete('/api/websites', async (req, res) => {\n  try {\n    const result = await pool.query('DELETE FROM contractor_websites RETURNING id');\n    res.json({\n      success: true,\n      message: `Successfully deleted ${result.rowCount} websites`\n    });\n  } catch (error) {\n    console.error('Delete all websites error:', error);\n    res.status(500).json({\n      error: 'Failed to delete all websites',\n      details: error.message\n    });\n  }\n});","map":{"version":3,"names":["API_BASE_URL","saveWebsite","websiteData","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","error","console","getAllWebsites","websites","getWebsiteById","id","website","deleteWebsite","success","deleteAllWebsites","app","delete","req","res","result","pool","query","message","rowCount","details"],"sources":["/Users/ab/inase tools/contractor-builder/src/api/websites.js"],"sourcesContent":["/**\n * API client for contractor builder backend\n */\n\n// Use same origin - API is served from the same server as the frontend\n// This works because server.js serves both the React app AND the API\nconst API_BASE_URL = '';\n\n/**\n * Save a website to the database\n */\nexport const saveWebsite = async (websiteData) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(websiteData)\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error saving website:', error);\n    throw error;\n  }\n};\n\n/**\n * Get all websites from the database\n */\nexport const getAllWebsites = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`);\n    \n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.websites || [];\n  } catch (error) {\n    console.error('Error fetching websites:', error);\n    return [];\n  }\n};\n\n/**\n * Get a single website by ID\n */\nexport const getWebsiteById = async (id) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites/${id}`);\n    \n    if (!response.ok) {\n      if (response.status === 404) {\n        return null;\n      }\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.website;\n  } catch (error) {\n    console.error('Error fetching website:', error);\n    return null;\n  }\n};\n\n/**\n * Delete a website from the database\n */\nexport const deleteWebsite = async (id) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites/${id}`, {\n      method: 'DELETE'\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.success;\n  } catch (error) {\n    console.error('Error deleting website:', error);\n    throw error;\n  }\n};\n\n\nexport const deleteAllWebsites = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/websites`, {\n      method: 'DELETE'\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.success;\n  } catch (error) {\n    console.error('Error deleting all websites:', error);\n    throw error;\n  }\n};\n\n\n\n// Delete ALL websites\napp.delete('/api/websites', async (req, res) => {\n  try {\n    const result = await pool.query('DELETE FROM contractor_websites RETURNING id');\n    \n    res.json({ \n      success: true, \n      message: `Successfully deleted ${result.rowCount} websites` \n    });\n  } catch (error) {\n    console.error('Delete all websites error:', error);\n    res.status(500).json({ error: 'Failed to delete all websites', details: error.message });\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}