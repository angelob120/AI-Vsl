{"ast":null,"code":"var _s = $RefreshSig$();\n// FILE: src/components/RepliqStudio/hooks/useVideoCreation.js\nimport { useState } from 'react';\nimport { delay, generateUniqueId } from '../utils/fileHelpers';\nimport { saveToIndexedDB, LANDING_PAGE_PREFIX, addToVideoList } from '../utils/storage';\nimport { generateLandingPageHTML, generateVideoOnlyHTML } from '../utils/htmlGenerators';\nexport function useVideoCreation() {\n  _s();\n  const [isCreating, setIsCreating] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentLead, setCurrentLead] = useState(null);\n  const [createdVideos, setCreatedVideos] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const createVideos = async (leads, settings) => {\n    if (leads.length === 0) {\n      alert('Please upload a CSV with leads first!');\n      return;\n    }\n    if (!settings.introVideoData) {\n      alert('Please upload an intro video first!');\n      return;\n    }\n    setIsCreating(true);\n    setProgress(0);\n    setCreatedVideos([]);\n    setShowResults(false);\n    const baseUrl = window.location.origin + window.location.pathname;\n    const generatedVideos = [];\n    for (let i = 0; i < leads.length; i++) {\n      const lead = leads[i];\n      setCurrentLead(lead);\n      setProgress(Math.round(i / leads.length * 100));\n      await delay(100);\n      const videoId = generateUniqueId();\n\n      // Generate HTML\n      const landingPageHTML = generateLandingPageHTML(lead, settings);\n      const videoOnlyHTML = generateVideoOnlyHTML(lead, settings);\n\n      // Storage data\n      const storageData = {\n        id: videoId,\n        lead,\n        settings,\n        landingPageHTML,\n        videoOnlyHTML,\n        createdAt: new Date().toISOString()\n      };\n\n      // Save to IndexedDB\n      let savedSuccessfully = false;\n      try {\n        await saveToIndexedDB('landingPages', storageData);\n        savedSuccessfully = true;\n      } catch (e) {\n        console.warn('IndexedDB save failed:', e);\n      }\n\n      // Also save reference to localStorage\n      try {\n        const liteData = {\n          ...storageData,\n          settings: {\n            ...settings,\n            introVideoData: '[[STORED_IN_INDEXEDDB]]',\n            secondVideoData: settings.secondVideoData ? '[[STORED_IN_INDEXEDDB]]' : null\n          }\n        };\n        localStorage.setItem(LANDING_PAGE_PREFIX + videoId, JSON.stringify(liteData));\n        savedSuccessfully = true;\n      } catch (e) {\n        console.warn('localStorage save failed:', e);\n      }\n\n      // Create links\n      const landingPageLink = `${baseUrl}#landing-${videoId}`;\n      const videoOnlyLink = `${baseUrl}#video-${videoId}`;\n      const videoInfo = {\n        id: videoId,\n        success: savedSuccessfully ? 'YES' : 'PARTIAL',\n        originUrl: lead.websiteUrl,\n        firstName: lead.firstName,\n        companyName: lead.companyName,\n        landingPageLink,\n        videoOnlyLink,\n        landingPageHTML,\n        videoOnlyHTML\n      };\n      generatedVideos.push(videoInfo);\n\n      // Add to video list\n      addToVideoList({\n        id: videoId,\n        companyName: lead.companyName,\n        firstName: lead.firstName,\n        createdAt: new Date().toISOString()\n      });\n    }\n    setCreatedVideos(generatedVideos);\n    setProgress(100);\n    setCurrentLead(null);\n    await delay(500);\n    setIsCreating(false);\n    setShowResults(true);\n    return generatedVideos;\n  };\n  const closeResults = () => {\n    setShowResults(false);\n  };\n  const reset = () => {\n    setIsCreating(false);\n    setProgress(0);\n    setCurrentLead(null);\n    setCreatedVideos([]);\n    setShowResults(false);\n  };\n  return {\n    isCreating,\n    progress,\n    currentLead,\n    createdVideos,\n    showResults,\n    createVideos,\n    closeResults,\n    reset\n  };\n}\n_s(useVideoCreation, \"1VJycKXS+Q/Rr0482eDGAkIS07c=\");","map":{"version":3,"names":["useState","delay","generateUniqueId","saveToIndexedDB","LANDING_PAGE_PREFIX","addToVideoList","generateLandingPageHTML","generateVideoOnlyHTML","useVideoCreation","_s","isCreating","setIsCreating","progress","setProgress","currentLead","setCurrentLead","createdVideos","setCreatedVideos","showResults","setShowResults","createVideos","leads","settings","length","alert","introVideoData","baseUrl","window","location","origin","pathname","generatedVideos","i","lead","Math","round","videoId","landingPageHTML","videoOnlyHTML","storageData","id","createdAt","Date","toISOString","savedSuccessfully","e","console","warn","liteData","secondVideoData","localStorage","setItem","JSON","stringify","landingPageLink","videoOnlyLink","videoInfo","success","originUrl","websiteUrl","firstName","companyName","push","closeResults","reset"],"sources":["/Users/ab/inase tools/contractor-builder/src/components/RepliqStudio/hooks/useVideoCreation.js"],"sourcesContent":["// FILE: src/components/RepliqStudio/hooks/useVideoCreation.js\nimport { useState } from 'react';\nimport { delay, generateUniqueId } from '../utils/fileHelpers';\nimport { \n  saveToIndexedDB, \n  LANDING_PAGE_PREFIX, \n  addToVideoList \n} from '../utils/storage';\nimport { \n  generateLandingPageHTML, \n  generateVideoOnlyHTML \n} from '../utils/htmlGenerators';\n\nexport function useVideoCreation() {\n  const [isCreating, setIsCreating] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentLead, setCurrentLead] = useState(null);\n  const [createdVideos, setCreatedVideos] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n\n  const createVideos = async (leads, settings) => {\n    if (leads.length === 0) {\n      alert('Please upload a CSV with leads first!');\n      return;\n    }\n    if (!settings.introVideoData) {\n      alert('Please upload an intro video first!');\n      return;\n    }\n\n    setIsCreating(true);\n    setProgress(0);\n    setCreatedVideos([]);\n    setShowResults(false);\n\n    const baseUrl = window.location.origin + window.location.pathname;\n    const generatedVideos = [];\n\n    for (let i = 0; i < leads.length; i++) {\n      const lead = leads[i];\n      setCurrentLead(lead);\n      setProgress(Math.round((i / leads.length) * 100));\n\n      await delay(100);\n\n      const videoId = generateUniqueId();\n      \n      // Generate HTML\n      const landingPageHTML = generateLandingPageHTML(lead, settings);\n      const videoOnlyHTML = generateVideoOnlyHTML(lead, settings);\n      \n      // Storage data\n      const storageData = {\n        id: videoId,\n        lead,\n        settings,\n        landingPageHTML,\n        videoOnlyHTML,\n        createdAt: new Date().toISOString()\n      };\n\n      // Save to IndexedDB\n      let savedSuccessfully = false;\n      \n      try {\n        await saveToIndexedDB('landingPages', storageData);\n        savedSuccessfully = true;\n      } catch (e) {\n        console.warn('IndexedDB save failed:', e);\n      }\n\n      // Also save reference to localStorage\n      try {\n        const liteData = {\n          ...storageData,\n          settings: {\n            ...settings,\n            introVideoData: '[[STORED_IN_INDEXEDDB]]',\n            secondVideoData: settings.secondVideoData ? '[[STORED_IN_INDEXEDDB]]' : null\n          }\n        };\n        localStorage.setItem(LANDING_PAGE_PREFIX + videoId, JSON.stringify(liteData));\n        savedSuccessfully = true;\n      } catch (e) {\n        console.warn('localStorage save failed:', e);\n      }\n\n      // Create links\n      const landingPageLink = `${baseUrl}#landing-${videoId}`;\n      const videoOnlyLink = `${baseUrl}#video-${videoId}`;\n\n      const videoInfo = {\n        id: videoId,\n        success: savedSuccessfully ? 'YES' : 'PARTIAL',\n        originUrl: lead.websiteUrl,\n        firstName: lead.firstName,\n        companyName: lead.companyName,\n        landingPageLink,\n        videoOnlyLink,\n        landingPageHTML,\n        videoOnlyHTML\n      };\n\n      generatedVideos.push(videoInfo);\n      \n      // Add to video list\n      addToVideoList({\n        id: videoId,\n        companyName: lead.companyName,\n        firstName: lead.firstName,\n        createdAt: new Date().toISOString()\n      });\n    }\n\n    setCreatedVideos(generatedVideos);\n    setProgress(100);\n    setCurrentLead(null);\n    \n    await delay(500);\n    setIsCreating(false);\n    setShowResults(true);\n\n    return generatedVideos;\n  };\n\n  const closeResults = () => {\n    setShowResults(false);\n  };\n\n  const reset = () => {\n    setIsCreating(false);\n    setProgress(0);\n    setCurrentLead(null);\n    setCreatedVideos([]);\n    setShowResults(false);\n  };\n\n  return {\n    isCreating,\n    progress,\n    currentLead,\n    createdVideos,\n    showResults,\n    createVideos,\n    closeResults,\n    reset\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}