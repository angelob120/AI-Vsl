{"ast":null,"code":"// FILE: src/components/RepliqStudio/utils/storage.js\n// Storage utilities for IndexedDB and localStorage\n\nexport const LANDING_PAGE_PREFIX = 'repliq_landing_';\nexport const VIDEO_STORAGE_PREFIX = 'repliq_video_';\nexport const VIDEO_LIST_KEY = 'repliq_video_list';\n\n// ============================================\n// IndexedDB Helpers\n// ============================================\n\nexport const openVideoDB = () => {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('RepliqVideoDB', 1);\n    request.onerror = () => reject(request.error);\n    request.onsuccess = () => resolve(request.result);\n    request.onupgradeneeded = event => {\n      const db = event.target.result;\n      if (!db.objectStoreNames.contains('videos')) {\n        db.createObjectStore('videos', {\n          keyPath: 'id'\n        });\n      }\n      if (!db.objectStoreNames.contains('landingPages')) {\n        db.createObjectStore('landingPages', {\n          keyPath: 'id'\n        });\n      }\n    };\n  });\n};\nexport const saveToIndexedDB = async (storeName, data) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const request = store.put(data);\n      request.onsuccess = () => resolve(true);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB save error:', e);\n    return false;\n  }\n};\nexport const getFromIndexedDB = async (storeName, id) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readonly');\n      const store = transaction.objectStore(storeName);\n      const request = store.get(id);\n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB get error:', e);\n    return null;\n  }\n};\nexport const deleteFromIndexedDB = async (storeName, id) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const request = store.delete(id);\n      request.onsuccess = () => resolve(true);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB delete error:', e);\n    return false;\n  }\n};\n\n// ============================================\n// localStorage Helpers\n// ============================================\n\nexport const saveToLocalStorage = (key, data) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n    return true;\n  } catch (e) {\n    console.warn('localStorage save failed:', e);\n    return false;\n  }\n};\nexport const getFromLocalStorage = key => {\n  try {\n    const data = localStorage.getItem(key);\n    return data ? JSON.parse(data) : null;\n  } catch (e) {\n    console.warn('localStorage get failed:', e);\n    return null;\n  }\n};\nexport const getVideoList = () => {\n  return getFromLocalStorage(VIDEO_LIST_KEY) || [];\n};\nexport const addToVideoList = videoInfo => {\n  const list = getVideoList();\n  list.push(videoInfo);\n  saveToLocalStorage(VIDEO_LIST_KEY, list);\n};","map":{"version":3,"names":["LANDING_PAGE_PREFIX","VIDEO_STORAGE_PREFIX","VIDEO_LIST_KEY","openVideoDB","Promise","resolve","reject","request","indexedDB","open","onerror","error","onsuccess","result","onupgradeneeded","event","db","target","objectStoreNames","contains","createObjectStore","keyPath","saveToIndexedDB","storeName","data","transaction","store","objectStore","put","e","console","getFromIndexedDB","id","get","deleteFromIndexedDB","delete","saveToLocalStorage","key","localStorage","setItem","JSON","stringify","warn","getFromLocalStorage","getItem","parse","getVideoList","addToVideoList","videoInfo","list","push"],"sources":["/Users/ab/inase tools/contractor-builder/src/components/RepliqStudio/utils/storage.js"],"sourcesContent":["// FILE: src/components/RepliqStudio/utils/storage.js\n// Storage utilities for IndexedDB and localStorage\n\nexport const LANDING_PAGE_PREFIX = 'repliq_landing_';\nexport const VIDEO_STORAGE_PREFIX = 'repliq_video_';\nexport const VIDEO_LIST_KEY = 'repliq_video_list';\n\n// ============================================\n// IndexedDB Helpers\n// ============================================\n\nexport const openVideoDB = () => {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('RepliqVideoDB', 1);\n    request.onerror = () => reject(request.error);\n    request.onsuccess = () => resolve(request.result);\n    request.onupgradeneeded = (event) => {\n      const db = event.target.result;\n      if (!db.objectStoreNames.contains('videos')) {\n        db.createObjectStore('videos', { keyPath: 'id' });\n      }\n      if (!db.objectStoreNames.contains('landingPages')) {\n        db.createObjectStore('landingPages', { keyPath: 'id' });\n      }\n    };\n  });\n};\n\nexport const saveToIndexedDB = async (storeName, data) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const request = store.put(data);\n      request.onsuccess = () => resolve(true);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB save error:', e);\n    return false;\n  }\n};\n\nexport const getFromIndexedDB = async (storeName, id) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readonly');\n      const store = transaction.objectStore(storeName);\n      const request = store.get(id);\n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB get error:', e);\n    return null;\n  }\n};\n\nexport const deleteFromIndexedDB = async (storeName, id) => {\n  try {\n    const db = await openVideoDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const request = store.delete(id);\n      request.onsuccess = () => resolve(true);\n      request.onerror = () => reject(request.error);\n    });\n  } catch (e) {\n    console.error('IndexedDB delete error:', e);\n    return false;\n  }\n};\n\n// ============================================\n// localStorage Helpers\n// ============================================\n\nexport const saveToLocalStorage = (key, data) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n    return true;\n  } catch (e) {\n    console.warn('localStorage save failed:', e);\n    return false;\n  }\n};\n\nexport const getFromLocalStorage = (key) => {\n  try {\n    const data = localStorage.getItem(key);\n    return data ? JSON.parse(data) : null;\n  } catch (e) {\n    console.warn('localStorage get failed:', e);\n    return null;\n  }\n};\n\nexport const getVideoList = () => {\n  return getFromLocalStorage(VIDEO_LIST_KEY) || [];\n};\n\nexport const addToVideoList = (videoInfo) => {\n  const list = getVideoList();\n  list.push(videoInfo);\n  saveToLocalStorage(VIDEO_LIST_KEY, list);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}