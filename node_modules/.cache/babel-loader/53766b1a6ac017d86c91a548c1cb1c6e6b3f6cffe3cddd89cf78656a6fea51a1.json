{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useRef } from 'react';\nimport { fileToBase64 } from '../utils/fileHelpers';\nimport { saveToIndexedDB } from '../utils/storage';\nexport function useVideoUpload(videoId) {\n  _s();\n  const [videoUrl, setVideoUrl] = useState(null);\n  const [videoData, setVideoData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const inputRef = useRef(null);\n  const handleUpload = async e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file || !file.type.startsWith('video/')) return;\n    setIsLoading(true);\n    try {\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n      const base64Data = await fileToBase64(file);\n      setVideoData(base64Data);\n      await saveToIndexedDB('videos', {\n        id: videoId,\n        data: base64Data,\n        fileName: file.name,\n        updatedAt: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error('Video upload error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const triggerUpload = () => {\n    var _inputRef$current;\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.click();\n  };\n  const reset = () => {\n    setVideoUrl(null);\n    setVideoData(null);\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n  return {\n    videoUrl,\n    videoData,\n    isLoading,\n    inputRef,\n    handleUpload,\n    triggerUpload,\n    reset\n  };\n}\n_s(useVideoUpload, \"3w6RDJyOVTk+2iLqpMtApGmdl28=\");","map":{"version":3,"names":["useState","useRef","fileToBase64","saveToIndexedDB","useVideoUpload","videoId","_s","videoUrl","setVideoUrl","videoData","setVideoData","isLoading","setIsLoading","inputRef","handleUpload","e","_e$target$files","file","target","files","type","startsWith","url","URL","createObjectURL","base64Data","id","data","fileName","name","updatedAt","Date","toISOString","error","console","triggerUpload","_inputRef$current","current","click","reset","value"],"sources":["/Users/ab/inase tools/contractor-builder/src/components/RepliqStudio/hooks/useVideoUpload.js"],"sourcesContent":["import { useState, useRef } from 'react';\nimport { fileToBase64 } from '../utils/fileHelpers';\nimport { saveToIndexedDB } from '../utils/storage';\n\nexport function useVideoUpload(videoId) {\n  const [videoUrl, setVideoUrl] = useState(null);\n  const [videoData, setVideoData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const inputRef = useRef(null);\n\n  const handleUpload = async (e) => {\n    const file = e.target.files?.[0];\n    if (!file || !file.type.startsWith('video/')) return;\n\n    setIsLoading(true);\n    \n    try {\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n      \n      const base64Data = await fileToBase64(file);\n      setVideoData(base64Data);\n      \n      await saveToIndexedDB('videos', {\n        id: videoId,\n        data: base64Data,\n        fileName: file.name,\n        updatedAt: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error('Video upload error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const triggerUpload = () => {\n    inputRef.current?.click();\n  };\n\n  const reset = () => {\n    setVideoUrl(null);\n    setVideoData(null);\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  return {\n    videoUrl,\n    videoData,\n    isLoading,\n    inputRef,\n    handleUpload,\n    triggerUpload,\n    reset\n  };\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACxC,SAASC,YAAY,QAAQ,sBAAsB;AACnD,SAASC,eAAe,QAAQ,kBAAkB;AAElD,OAAO,SAASC,cAAcA,CAACC,OAAO,EAAE;EAAAC,EAAA;EACtC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACS,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAMa,QAAQ,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAE7B,MAAMa,YAAY,GAAG,MAAOC,CAAC,IAAK;IAAA,IAAAC,eAAA;IAChC,MAAMC,IAAI,IAAAD,eAAA,GAAGD,CAAC,CAACG,MAAM,CAACC,KAAK,cAAAH,eAAA,uBAAdA,eAAA,CAAiB,CAAC,CAAC;IAChC,IAAI,CAACC,IAAI,IAAI,CAACA,IAAI,CAACG,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;IAE9CT,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC;MACrCT,WAAW,CAACc,GAAG,CAAC;MAEhB,MAAMG,UAAU,GAAG,MAAMvB,YAAY,CAACe,IAAI,CAAC;MAC3CP,YAAY,CAACe,UAAU,CAAC;MAExB,MAAMtB,eAAe,CAAC,QAAQ,EAAE;QAC9BuB,EAAE,EAAErB,OAAO;QACXsB,IAAI,EAAEF,UAAU;QAChBG,QAAQ,EAAEX,IAAI,CAACY,IAAI;QACnBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C,CAAC,SAAS;MACRrB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMuB,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,iBAAA;IAC1B,CAAAA,iBAAA,GAAAvB,QAAQ,CAACwB,OAAO,cAAAD,iBAAA,uBAAhBA,iBAAA,CAAkBE,KAAK,CAAC,CAAC;EAC3B,CAAC;EAED,MAAMC,KAAK,GAAGA,CAAA,KAAM;IAClB/B,WAAW,CAAC,IAAI,CAAC;IACjBE,YAAY,CAAC,IAAI,CAAC;IAClB,IAAIG,QAAQ,CAACwB,OAAO,EAAE;MACpBxB,QAAQ,CAACwB,OAAO,CAACG,KAAK,GAAG,EAAE;IAC7B;EACF,CAAC;EAED,OAAO;IACLjC,QAAQ;IACRE,SAAS;IACTE,SAAS;IACTE,QAAQ;IACRC,YAAY;IACZqB,aAAa;IACbI;EACF,CAAC;AACH;AAACjC,EAAA,CArDeF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}