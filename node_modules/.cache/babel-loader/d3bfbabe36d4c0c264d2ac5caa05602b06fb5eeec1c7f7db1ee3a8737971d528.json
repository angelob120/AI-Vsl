{"ast":null,"code":"/**\n * CSV Parsing and Export Utilities - Updated for RepliQ Studio\n */\n\n/**\n * Parse CSV text into array of arrays\n * Handles quoted fields and commas within quotes\n */\nexport const parseCSV = text => {\n  const lines = text.trim().split('\\n');\n  return lines.map(line => {\n    const values = [];\n    let current = '';\n    let inQuotes = false;\n    for (let char of line) {\n      if (char === '\"') {\n        inQuotes = !inQuotes;\n      } else if (char === ',' && !inQuotes) {\n        values.push(current.trim());\n        current = '';\n      } else {\n        current += char;\n      }\n    }\n    values.push(current.trim());\n    return values;\n  });\n};\n\n/**\n * Escape a value for CSV format\n */\nexport const escapeCSV = str => {\n  if (typeof str !== 'string') str = String(str || '');\n  if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n    return `\"${str.replace(/\"/g, '\"\"')}\"`;\n  }\n  return str;\n};\n\n/**\n * Export data as CSV file download\n */\nexport const downloadCSV = (headers, rows, filename) => {\n  const csvContent = [headers.join(','), ...rows.map(row => row.map(escapeCSV).join(','))].join('\\n');\n  const blob = new Blob([csvContent], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\n\n/**\n * Export contractor websites as CSV\n */\nexport const exportWebsitesCSV = websites => {\n  const headers = ['Business Name', 'Website Link', 'Created Date', 'Phone', 'Email'];\n  const rows = websites.map(site => [site.formData.companyName, site.link, new Date(site.createdAt).toLocaleDateString(), site.formData.phone, site.formData.email]);\n  const filename = `contractor-websites-${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};\n\n/**\n * UPDATED: Export RepliQ video results as CSV\n * Now includes Landing Page Link and Video Only Link\n */\nexport const exportVideosCSV = videos => {\n  const headers = ['Id', 'Success', 'Website URL', 'First Name', 'Company Name', 'Landing Page Link', 'Video Only Link'];\n  const rows = videos.map(video => [video.id, video.success, video.originUrl, video.firstName, video.lastName, video.landingPageLink, video.videoOnlyLink]);\n  const filename = `repliq_videos_${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};\n\n/**\n * Legacy export format (for backward compatibility)\n */\nexport const exportVideosCSVLegacy = videos => {\n  const headers = ['Id', 'VideoSuccess', 'OriginUrls', 'FirstName', 'LastName', 'VideoLink', 'VideoHtmlEmail', 'ShortVideoHtml', 'VideoPreview', 'BackgroundImageLink', 'ImgHtmlEmail'];\n  const rows = videos.map(video => [video.id, video.success, video.originUrl, video.firstName, video.lastName, video.videoLink, video.videoHtmlEmail || '', video.shortVideoHtml || '', video.videoPreview || '', video.backgroundImageLink || '', video.imgHtmlEmail || '']);\n  const filename = `repliq_videos_legacy_${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};","map":{"version":3,"names":["parseCSV","text","lines","trim","split","map","line","values","current","inQuotes","char","push","escapeCSV","str","String","includes","replace","downloadCSV","headers","rows","filename","csvContent","join","row","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","exportWebsitesCSV","websites","site","formData","companyName","Date","createdAt","toLocaleDateString","phone","email","toISOString","exportVideosCSV","videos","video","id","success","originUrl","firstName","lastName","landingPageLink","videoOnlyLink","exportVideosCSVLegacy","videoLink","videoHtmlEmail","shortVideoHtml","videoPreview","backgroundImageLink","imgHtmlEmail"],"sources":["/Users/ab/inase tools/contractor-builder/src/utils/csv.js"],"sourcesContent":["/**\n * CSV Parsing and Export Utilities - Updated for RepliQ Studio\n */\n\n/**\n * Parse CSV text into array of arrays\n * Handles quoted fields and commas within quotes\n */\nexport const parseCSV = (text) => {\n  const lines = text.trim().split('\\n');\n  return lines.map(line => {\n    const values = [];\n    let current = '';\n    let inQuotes = false;\n    \n    for (let char of line) {\n      if (char === '\"') {\n        inQuotes = !inQuotes;\n      } else if (char === ',' && !inQuotes) {\n        values.push(current.trim());\n        current = '';\n      } else {\n        current += char;\n      }\n    }\n    values.push(current.trim());\n    return values;\n  });\n};\n\n/**\n * Escape a value for CSV format\n */\nexport const escapeCSV = (str) => {\n  if (typeof str !== 'string') str = String(str || '');\n  if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n    return `\"${str.replace(/\"/g, '\"\"')}\"`;\n  }\n  return str;\n};\n\n/**\n * Export data as CSV file download\n */\nexport const downloadCSV = (headers, rows, filename) => {\n  const csvContent = [\n    headers.join(','),\n    ...rows.map(row => row.map(escapeCSV).join(','))\n  ].join('\\n');\n  \n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\n\n/**\n * Export contractor websites as CSV\n */\nexport const exportWebsitesCSV = (websites) => {\n  const headers = ['Business Name', 'Website Link', 'Created Date', 'Phone', 'Email'];\n  const rows = websites.map(site => [\n    site.formData.companyName,\n    site.link,\n    new Date(site.createdAt).toLocaleDateString(),\n    site.formData.phone,\n    site.formData.email\n  ]);\n  \n  const filename = `contractor-websites-${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};\n\n/**\n * UPDATED: Export RepliQ video results as CSV\n * Now includes Landing Page Link and Video Only Link\n */\nexport const exportVideosCSV = (videos) => {\n  const headers = [\n    'Id',\n    'Success',\n    'Website URL',\n    'First Name',\n    'Company Name',\n    'Landing Page Link',\n    'Video Only Link'\n  ];\n\n  const rows = videos.map(video => [\n    video.id,\n    video.success,\n    video.originUrl,\n    video.firstName,\n    video.lastName,\n    video.landingPageLink,\n    video.videoOnlyLink\n  ]);\n\n  const filename = `repliq_videos_${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};\n\n/**\n * Legacy export format (for backward compatibility)\n */\nexport const exportVideosCSVLegacy = (videos) => {\n  const headers = [\n    'Id',\n    'VideoSuccess',\n    'OriginUrls',\n    'FirstName',\n    'LastName',\n    'VideoLink',\n    'VideoHtmlEmail',\n    'ShortVideoHtml',\n    'VideoPreview',\n    'BackgroundImageLink',\n    'ImgHtmlEmail'\n  ];\n\n  const rows = videos.map(video => [\n    video.id,\n    video.success,\n    video.originUrl,\n    video.firstName,\n    video.lastName,\n    video.videoLink,\n    video.videoHtmlEmail || '',\n    video.shortVideoHtml || '',\n    video.videoPreview || '',\n    video.backgroundImageLink || '',\n    video.imgHtmlEmail || ''\n  ]);\n\n  const filename = `repliq_videos_legacy_${new Date().toISOString().split('T')[0]}.csv`;\n  downloadCSV(headers, rows, filename);\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}